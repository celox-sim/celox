import{_ as d,C as i,o,c,j as e,a,E as r,w as l,ah as h}from"./chunks/framework.ojwJKwrc.js";const g=JSON.parse('{"title":"Benchmarks","description":"","frontmatter":{},"headers":[],"relativePath":"benchmarks/index.md","filePath":"benchmarks/index.md"}'),p={name:"benchmarks/index.md"};function u(b,t,k,m,_,y){const s=i("BenchmarkDashboard"),n=i("ClientOnly");return o(),c("div",null,[t[0]||(t[0]=e("h1",{id:"benchmarks",tabindex:"-1"},[a("Benchmarks "),e("a",{class:"header-anchor",href:"#benchmarks","aria-label":'Permalink to "Benchmarks"'},"​")],-1)),t[1]||(t[1]=e("p",null,[a("Celox includes benchmark suites for the Rust core, the TypeScript runtime, and Verilator as a reference baseline. CI runs benchmarks on every push to "),e("code",null,"master"),a(" and publishes an interactive trend dashboard.")],-1)),t[2]||(t[2]=e("h2",{id:"dashboard",tabindex:"-1"},[a("Dashboard "),e("a",{class:"header-anchor",href:"#dashboard","aria-label":'Permalink to "Dashboard"'},"​")],-1)),r(n,null,{default:l(()=>[r(s)]),_:1}),t[3]||(t[3]=h('<p>You can also view the raw data on the <a href="https://celox-sim.github.io/celox/dev/bench/" target="_blank" rel="noreferrer">external dashboard</a>.</p><h2 id="what-is-measured" tabindex="-1">What is Measured <a class="header-anchor" href="#what-is-measured" aria-label="Permalink to &quot;What is Measured&quot;">​</a></h2><p>All benchmarks use a counter module (<code>Top</code>) with <strong>N=1000</strong> parallel 32-bit counter instances. This exercises the full JIT pipeline under a realistic workload.</p><h3 id="rust-benchmarks-criterion" tabindex="-1">Rust Benchmarks (Criterion) <a class="header-anchor" href="#rust-benchmarks-criterion" aria-label="Permalink to &quot;Rust Benchmarks (Criterion)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Benchmark</th><th>Description</th></tr></thead><tbody><tr><td><code>simulation_build_top_n1000</code></td><td>JIT compile time</td></tr><tr><td><code>simulation_tick_top_n1000_x1</code></td><td>Single clock tick</td></tr><tr><td><code>simulation_tick_top_n1000_x1000000</code></td><td>1M ticks in a loop</td></tr><tr><td><code>testbench_tick_top_n1000_x1</code></td><td>Single testbench cycle (write + tick + read)</td></tr><tr><td><code>testbench_tick_top_n1000_x1000000</code></td><td>1M testbench cycles</td></tr><tr><td><code>simulator_tick_x10000</code></td><td>Raw Simulator::tick, 10k iterations</td></tr><tr><td><code>simulation_step_x20000</code></td><td>Simulation::step, 20k steps</td></tr></tbody></table><h3 id="typescript-benchmarks-vitest" tabindex="-1">TypeScript Benchmarks (Vitest) <a class="header-anchor" href="#typescript-benchmarks-vitest" aria-label="Permalink to &quot;TypeScript Benchmarks (Vitest)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Benchmark</th><th>Description</th></tr></thead><tbody><tr><td><code>simulation_build_top_n1000</code></td><td>JS build / JIT compile time</td></tr><tr><td><code>simulation_tick_top_n1000_x1</code></td><td>Single tick</td></tr><tr><td><code>simulation_tick_top_n1000_x1000000</code></td><td>1M ticks in a loop</td></tr><tr><td><code>testbench_tick_top_n1000_x1</code></td><td>Single testbench cycle</td></tr><tr><td><code>testbench_tick_top_n1000_x1000000</code></td><td>1M testbench cycles</td></tr><tr><td><code>testbench_array_tick_top_n1000_x1</code></td><td>Single cycle with array <code>.at()</code> access</td></tr><tr><td><code>testbench_array_tick_top_n1000_x1000000</code></td><td>1M cycles with array <code>.at()</code> access</td></tr></tbody></table><h3 id="verilator-c-reference" tabindex="-1">Verilator (C++ reference) <a class="header-anchor" href="#verilator-c-reference" aria-label="Permalink to &quot;Verilator (C++ reference)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Benchmark</th><th>Description</th></tr></thead><tbody><tr><td><code>simulation_build_top_n1000</code></td><td>Verilate + C++ compile time</td></tr><tr><td><code>simulation_tick_top_n1000_x1</code></td><td>Single clock tick</td></tr><tr><td><code>simulation_tick_top_n1000_x1000000</code></td><td>1M ticks in a loop</td></tr><tr><td><code>testbench_tick_top_n1000_x1</code></td><td>Single cycle (tick + read output)</td></tr><tr><td><code>testbench_tick_top_n1000_x1000000</code></td><td>1M cycles (tick + read output)</td></tr></tbody></table><p>The Rust, TypeScript, and Verilator benchmarks use the same design, so you can directly compare the performance of all three.</p><h2 id="running-locally" tabindex="-1">Running Locally <a class="header-anchor" href="#running-locally" aria-label="Permalink to &quot;Running Locally&quot;">​</a></h2><h3 id="rust" tabindex="-1">Rust <a class="header-anchor" href="#rust" aria-label="Permalink to &quot;Rust&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> celox</span></span></code></pre></div><h3 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-label="Permalink to &quot;TypeScript&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench</span></span></code></pre></div><p>This builds the NAPI addon in release mode, builds packages, then runs Vitest benchmarks.</p><h3 id="verilator" tabindex="-1">Verilator <a class="header-anchor" href="#verilator" aria-label="Permalink to &quot;Verilator&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/run-verilator-bench.sh</span></span></code></pre></div><p>Requires <code>verilator</code> and a C++ toolchain.</p><h2 id="ci-environment" tabindex="-1">CI Environment <a class="header-anchor" href="#ci-environment" aria-label="Permalink to &quot;CI Environment&quot;">​</a></h2><p>Benchmarks run on GitHub Actions shared runners (<code>ubuntu-latest</code>). Because these runners share hardware with other workloads, some noise in the results is expected. The alert threshold is set to 200% to avoid false positives. Focus on long-term trends rather than individual data points.</p>',21))])}const v=d(p,[["render",u]]);export{g as __pageData,v as default};
