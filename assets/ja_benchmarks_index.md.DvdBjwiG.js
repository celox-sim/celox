import{_ as r,C as d,o as n,c,j as e,a,E as i,w as l,ah as h}from"./chunks/framework.ojwJKwrc.js";const g=JSON.parse('{"title":"ベンチマーク","description":"","frontmatter":{},"headers":[],"relativePath":"ja/benchmarks/index.md","filePath":"ja/benchmarks/index.md"}'),p={name:"ja/benchmarks/index.md"};function _(b,t,u,k,m,x){const s=d("BenchmarkDashboard"),o=d("ClientOnly");return n(),c("div",null,[t[0]||(t[0]=e("h1",{id:"ベンチマーク",tabindex:"-1"},[a("ベンチマーク "),e("a",{class:"header-anchor",href:"#ベンチマーク","aria-label":'Permalink to "ベンチマーク"'},"​")],-1)),t[1]||(t[1]=e("p",null,[a("Celox には Rust コアと TypeScript ランタイムの両方のベンチマークスイートが含まれています。CI は "),e("code",null,"master"),a(" への push ごとにベンチマークを自動実行し、インタラクティブなトレンドダッシュボードを公開します。")],-1)),t[2]||(t[2]=e("h2",{id:"ダッシュボード",tabindex:"-1"},[a("ダッシュボード "),e("a",{class:"header-anchor",href:"#ダッシュボード","aria-label":'Permalink to "ダッシュボード"'},"​")],-1)),i(o,null,{default:l(()=>[i(s)]),_:1}),t[3]||(t[3]=h('<p>生データは<a href="https://celox-sim.github.io/celox/dev/bench/" target="_blank" rel="noreferrer">外部ダッシュボード</a>でも確認できます。</p><h2 id="測定対象" tabindex="-1">測定対象 <a class="header-anchor" href="#測定対象" aria-label="Permalink to &quot;測定対象&quot;">​</a></h2><p>すべてのベンチマークは <strong>N=1000</strong> 個の並列 32 ビットカウンタインスタンスを持つカウンタモジュール（<code>Top</code>）を使用します。現実的なワークロードで JIT パイプライン全体を検証します。</p><h3 id="rust-ベンチマーク-criterion" tabindex="-1">Rust ベンチマーク（Criterion） <a class="header-anchor" href="#rust-ベンチマーク-criterion" aria-label="Permalink to &quot;Rust ベンチマーク（Criterion）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>ベンチマーク</th><th>説明</th></tr></thead><tbody><tr><td><code>simulation_build_top_n1000</code></td><td>JIT コンパイル時間</td></tr><tr><td><code>simulation_tick_top_n1000_x1</code></td><td>単一クロックティック</td></tr><tr><td><code>simulation_tick_top_n1000_x1000000</code></td><td>100 万ティックのループ</td></tr><tr><td><code>testbench_tick_top_n1000_x1</code></td><td>単一テストベンチサイクル（書込 + ティック + 読出）</td></tr><tr><td><code>testbench_tick_top_n1000_x1000000</code></td><td>100 万テストベンチサイクル</td></tr><tr><td><code>simulator_tick_x10000</code></td><td>生の Simulator::tick、1 万回反復</td></tr><tr><td><code>simulation_step_x20000</code></td><td>Simulation::step、2 万ステップ</td></tr></tbody></table><h3 id="typescript-ベンチマーク-vitest" tabindex="-1">TypeScript ベンチマーク（Vitest） <a class="header-anchor" href="#typescript-ベンチマーク-vitest" aria-label="Permalink to &quot;TypeScript ベンチマーク（Vitest）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>ベンチマーク</th><th>説明</th></tr></thead><tbody><tr><td><code>simulation_build_top_n1000</code></td><td>JS ビルド / JIT コンパイル時間</td></tr><tr><td><code>simulation_tick_top_n1000_x1</code></td><td>単一ティック</td></tr><tr><td><code>simulation_tick_top_n1000_x1000000</code></td><td>100 万ティックのループ</td></tr><tr><td><code>testbench_tick_top_n1000_x1</code></td><td>単一テストベンチサイクル</td></tr><tr><td><code>testbench_tick_top_n1000_x1000000</code></td><td>100 万テストベンチサイクル</td></tr><tr><td><code>testbench_array_tick_top_n1000_x1</code></td><td>配列 <code>.at()</code> アクセス付き単一サイクル</td></tr><tr><td><code>testbench_array_tick_top_n1000_x1000000</code></td><td>配列 <code>.at()</code> アクセス付き 100 万サイクル</td></tr></tbody></table><p>Rust と TypeScript のベンチマークは対応しているため、2 つのランタイムの性能を直接比較できます。</p><h2 id="ローカル実行" tabindex="-1">ローカル実行 <a class="header-anchor" href="#ローカル実行" aria-label="Permalink to &quot;ローカル実行&quot;">​</a></h2><h3 id="rust" tabindex="-1">Rust <a class="header-anchor" href="#rust" aria-label="Permalink to &quot;Rust&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> celox</span></span></code></pre></div><h3 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-label="Permalink to &quot;TypeScript&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench</span></span></code></pre></div><p>リリースモードで NAPI アドオンをビルドし、パッケージをビルドした後、Vitest ベンチマークを実行します。</p><h2 id="ci-環境" tabindex="-1">CI 環境 <a class="header-anchor" href="#ci-環境" aria-label="Permalink to &quot;CI 環境&quot;">​</a></h2><p>ベンチマークは GitHub Actions の共有ランナー（<code>ubuntu-latest</code>）で実行されます。共有ハードウェアのため、結果にノイズが含まれることがあります。誤検知を避けるため、アラート閾値は 200% に設定されています。個々のデータポイントではなく、長期的なトレンドに注目してください。</p>',16))])}const C=r(p,[["render",_]]);export{g as __pageData,C as default};
