import{_ as s,o as e,c as i,ae as a}from"./chunks/framework.Dk94_bKO.js";const k=JSON.parse('{"title":"Type Conversion","description":"","frontmatter":{},"headers":[],"relativePath":"guide/type-conversion.md","filePath":"guide/type-conversion.md"}'),d={name:"guide/type-conversion.md"};function n(o,t,l,h,r,p){return e(),i("div",null,[...t[0]||(t[0]=[a(`<h1 id="type-conversion" tabindex="-1">Type Conversion <a class="header-anchor" href="#type-conversion" aria-label="Permalink to &quot;Type Conversion&quot;">​</a></h1><p>This page describes how Veryl types are mapped to TypeScript types when <code>celox-ts-gen</code> generates module definitions.</p><h2 id="conversion-table" tabindex="-1">Conversion Table <a class="header-anchor" href="#conversion-table" aria-label="Permalink to &quot;Conversion Table&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Veryl Type</th><th>Width</th><th>TS Type</th><th>4-State</th><th>Notes</th></tr></thead><tbody><tr><td><code>clock</code></td><td>1</td><td><em>(excluded from ports)</em></td><td>yes</td><td>Becomes an event via <code>addClock()</code> / <code>tick()</code></td></tr><tr><td><code>reset</code></td><td>1</td><td><code>number</code></td><td>yes</td><td></td></tr><tr><td><code>logic&lt;N&gt;</code> (N ≤ 53)</td><td>N</td><td><code>number</code></td><td>yes</td><td></td></tr><tr><td><code>logic&lt;N&gt;</code> (N &gt; 53)</td><td>N</td><td><code>bigint</code></td><td>yes</td><td></td></tr><tr><td><code>bit&lt;N&gt;</code> (N ≤ 53)</td><td>N</td><td><code>number</code></td><td>no</td><td>2-state only</td></tr><tr><td><code>bit&lt;N&gt;</code> (N &gt; 53)</td><td>N</td><td><code>bigint</code></td><td>no</td><td>2-state only</td></tr></tbody></table><h2 id="_53-bit-threshold" tabindex="-1">53-bit Threshold <a class="header-anchor" href="#_53-bit-threshold" aria-label="Permalink to &quot;53-bit Threshold&quot;">​</a></h2><p>JavaScript <code>number</code> is an IEEE 754 double-precision float that can represent integers exactly up to 2<sup>53</sup> − 1 (<code>Number.MAX_SAFE_INTEGER</code>). Signals wider than 53 bits use <code>bigint</code> to avoid silent precision loss.</p><h2 id="direction-and-mutability" tabindex="-1">Direction and Mutability <a class="header-anchor" href="#direction-and-mutability" aria-label="Permalink to &quot;Direction and Mutability&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Direction</th><th>Read</th><th>Write</th><th>TS Modifier</th></tr></thead><tbody><tr><td><code>input</code></td><td>yes</td><td>yes</td><td><em>(mutable)</em></td></tr><tr><td><code>output</code></td><td>yes</td><td>no</td><td><code>readonly</code></td></tr><tr><td><code>inout</code></td><td>yes</td><td>yes</td><td><em>(mutable)</em></td></tr></tbody></table><p>Output ports are declared <code>readonly</code> in the generated <code>Ports</code> interface. Attempting to assign to an output port results in a TypeScript compile error.</p><h2 id="clock-ports" tabindex="-1">Clock Ports <a class="header-anchor" href="#clock-ports" aria-label="Permalink to &quot;Clock Ports&quot;">​</a></h2><p>Ports typed as <code>clock</code> (including <code>clock_posedge</code> and <code>clock_negedge</code>) are <strong>not</strong> included in the generated <code>Ports</code> interface. Instead, they appear in the module&#39;s <code>events</code> array and are used with:</p><ul><li><code>Simulator.tick()</code> / <code>Simulator.event()</code> for event-based simulation</li><li><code>Simulation.addClock()</code> for time-based simulation</li></ul><h2 id="array-ports" tabindex="-1">Array Ports <a class="header-anchor" href="#array-ports" aria-label="Permalink to &quot;Array Ports&quot;">​</a></h2><p>Array ports (e.g., <code>output logic&lt;32&gt;[4]</code>) are represented as an object with indexed access:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CounterPorts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>For input array ports, a <code>set(i, value)</code> method is also generated:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPorts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_4-state-vs-2-state" tabindex="-1">4-State vs 2-State <a class="header-anchor" href="#_4-state-vs-2-state" aria-label="Permalink to &quot;4-State vs 2-State&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Type</th><th>4-State</th></tr></thead><tbody><tr><td><code>logic</code></td><td>yes</td></tr><tr><td><code>clock</code></td><td>yes</td></tr><tr><td><code>reset</code></td><td>yes</td></tr><tr><td><code>bit</code></td><td>no</td></tr></tbody></table><p>When <code>fourState: true</code> is enabled in <code>SimulatorOptions</code>, 4-state signals carry an additional mask alongside the value. Mask bits set to 1 indicate unknown (X) bits. Use the <code>FourState()</code> helper to construct 4-state values and the vitest matchers (<code>toBeX</code>, <code>toBeAllX</code>, <code>toBeNotX</code>) to assert on them.</p><p>See <a href="./four-state.html">4-State Simulation</a> for details.</p>`,21)])])}const y=s(d,[["render",n]]);export{k as __pageData,y as default};
